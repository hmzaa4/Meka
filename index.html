<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>For My Future Wife ‚ù§Ô∏è</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Nunito:wght@300;600;800&display=swap" rel="stylesheet">
  <style>
    :root { --bg: #111; --card: #1e1e1e; --accent: #ff4d6d; --text: #fff; }
    * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
    body { margin: 0; height: 100vh; overflow: hidden; background: var(--bg); color: var(--text); font-family: 'Nunito', sans-serif; display: flex; justify-content: center; align-items: center; background-image: radial-gradient(circle at center, #222 0%, #000 100%); }
    .app { width: 100%; max-width: 420px; height: 100%; max-height: 850px; background: var(--card); border-radius: 0; position: relative; overflow: hidden; box-shadow: 0 0 50px rgba(0,0,0,0.5); display: flex; flex-direction: column; }
    @media (min-width: 500px) { .app { border-radius: 30px; height: 90vh; } }
    .progress-bar { height: 4px; background: #333; width: 100%; }
    .progress-fill { height: 100%; background: var(--accent); width: 0%; transition: width 0.5s ease; }
    .screen { flex: 1; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; opacity: 0; transition: opacity 0.5s ease; }
    .screen.active { display: flex; opacity: 1; }
    h1 { font-family: 'Dancing Script', cursive; color: var(--accent); font-size: 32px; margin-bottom: 15px; }
    p { font-size: 18px; line-height: 1.6; color: #ccc; margin-bottom: 30px; }
    .typing-text { min-height: 60px; font-style: italic; color: #fff; }
    input { background: #333; border: 2px solid #555; color: white; padding: 15px; border-radius: 50px; font-size: 24px; text-align: center; width: 100%; outline: none; margin-bottom: 20px; }
    input:focus { border-color: var(--accent); }
    .btn { padding: 16px 40px; border-radius: 50px; border: none; background: var(--text); color: var(--bg); font-weight: 800; font-size: 16px; cursor: pointer; transition: transform 0.1s; margin-top: 10px; }
    .btn:active { transform: scale(0.95); }
    .btn-accent { background: var(--accent); color: white; box-shadow: 0 5px 15px rgba(255, 77, 109, 0.4); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .shake { animation: shake 0.4s ease-in-out; }
    @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-10px)} 75%{transform:translateX(10px)} }
    .stars { display: flex; gap: 20px; }
    .star { font-size: 30px; opacity: 0.3; cursor: pointer; transition: 0.3s; }
    .star.lit { opacity: 1; color: #ffe66d; text-shadow: 0 0 10px #ffe66d; transform: scale(1.2); }
    .mirror { background: #333; width: 100%; padding: 20px; border-radius: 10px; position: relative; cursor: pointer; color: var(--accent); font-family: 'Dancing Script', cursive; font-size: 24px; }
    .fog { position: absolute; inset: 0; background: rgba(255,255,255,0.8); border-radius: 10px; transition: opacity 1.5s; display: flex; align-items: center; justify-content: center; color: #333; font-weight: bold; }
    .mirror:hover .fog { opacity: 0; }
    .bowl { font-size: 60px; margin: 20px 0; transition: 0.3s; }
    .ingredients { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
    .ing { padding: 8px 15px; border: 1px solid #555; border-radius: 20px; cursor: pointer; }
    .slider-container { width: 100%; position: relative; padding: 0 20px; }
    input[type=range] { width: 100%; height: 10px; background: #333; border-radius: 5px; outline: none; border: none; appearance: none; }
    input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 25px; height: 25px; border-radius: 50%; background: var(--accent); cursor: pointer; }
    .runaway-zone { position: relative; width: 100%; height: 120px; margin-top: 20px; }
    #yesBtn { position: absolute; left: 20px; top: 30px; z-index: 10; width: 100px; }
    #noBtn { position: absolute; right: 20px; top: 30px; background: #555; color: #fff; width: 100px; }
    .ticket { background: #fff; color: #333; padding: 25px; border-radius: 15px; width: 100%; border-left: 5px solid var(--accent); text-align: left; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transform: rotate(-2deg); }
    .ticket-header { border-bottom: 2px dashed #ddd; padding-bottom: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
    #signature-pad { background: white; border-radius: 10px; cursor: crosshair; touch-action: none; margin-bottom: 15px; border: 1px solid #ccc;}
  </style>
</head>
<body>
<div class="app">
  <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
  <div class="screen active" id="p1"><h1>Hello, Beautiful.</h1><p>I made something special for you.<br>Are you ready?</p><button class="btn btn-accent" onclick="next(2)">Let's Go ‚ù§Ô∏è</button></div>
  <div class="screen" id="p2"><h1>Our Special Date</h1><p>To prove it's really you, enter the digits of a day that changed everything.</p><input type="tel" id="code" maxlength="4" placeholder="----"><button class="btn" onclick="checkCode()">Unlock My Heart</button><p id="error" style="color:var(--accent); font-size:14px; opacity:0; margin-top:10px;">Try your birtday... üòâ</p></div>
  <div class="screen" id="p3"><h1>Welcome Jaan</h1><div class="typing-text" id="typewriter"></div><button class="btn" onclick="next(4)" id="btn3" style="opacity:0">Continue</button></div>
  <div class="screen" id="p4"><h1>Set the Mood</h1><p>It's too quiet in here. Let's play our song.</p><p style="font-size:14px; opacity:0.8;">"Kol Aa by Aditiya Rikhari"</p><div style="font-size: 60px; margin: 20px; animation: pulse 2s infinite;">üéµ</div><button class="btn btn-accent" onclick="playMusic(this)">‚ñ∂ Play Music</button></div>
  <div class="screen" id="p5"><h1>Connect the Stars</h1><p>Our love was written in the stars.<br>Tap them all.</p><div class="stars"><div class="star" onclick="lightStar(this)">‚òÖ</div><div class="star" onclick="lightStar(this)">‚òÖ</div><div class="star" onclick="lightStar(this)">‚òÖ</div><div class="star" onclick="lightStar(this)">‚òÖ</div><div class="star" onclick="lightStar(this)">‚òÖ</div></div></div>
  <div class="screen" id="p6"><h1>A Secret Message</h1><p>The mirror is foggy. Touch it to read what's written.</p><div class="mirror" ontouchstart="revealMirror()" onmouseover="revealMirror()">"You are my everything Meku."<div class="fog" id="fog">Rub here...</div></div><button class="btn" id="mirrorBtn" style="opacity:0; margin-top:20px;" onclick="next(7)">I saw it!</button></div>
  <div class="screen" id="p7"><h1>The Perfect Mix</h1><p>What makes you the perfect future wife?</p><div class="bowl" id="bowl">ü•£</div><div class="ingredients"><div class="ing" onclick="addIng('Kindness')">‚ú® Kindness</div><div class="ing" onclick="addIng('Beauty')">üåπ Beauty</div><div class="ing" onclick="addIng('Smiles')">üòä Smiles</div><div class="ing" onclick="addIng('Patience')">üï∞Ô∏è Patience</div></div></div>
  <div class="screen" id="p8"><h1>Promises</h1><p>Check these boxes if you agree:</p><div style="text-align:left; display:inline-block;"><label><input type="checkbox" style="width:auto; margin-right:10px;" onchange="checkPromises()"> I will let you win arguments (sometimes).</label><br><br><label><input type="checkbox" style="width:auto; margin-right:10px;" onchange="checkPromises()"> I will accept your hoodies.</label><br><br><label><input type="checkbox" style="width:auto; margin-right:10px;" onchange="checkPromises()"> I will love you forever.</label></div><button class="btn btn-accent" id="promiseBtn" disabled onclick="next(9)">I Promise ‚úã</button></div>
  <div class="screen" id="p9"><h1>Closing the Distance</h1><p>No matter how far we are, I am always finding my way to you.</p><div style="width:100%; height:4px; background:#333; margin:30px 0; position:relative;"><div id="car" style="position:absolute; left:0; top:-15px; font-size:24px; transition: left 2s;">üöó</div><div style="position:absolute; right:0; top:-15px; font-size:24px;">üè†</div></div><button class="btn" onclick="driveCar()">Come Home</button></div>
  <div class="screen" id="p10"><h1>Focus on Us</h1><p>Life was blurry before you.</p><div id="blurImg" style="width:200px; height:200px; background:url('https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=400'); background-size:cover; border-radius:20px; filter:blur(20px); transition:3s;"></div><button class="btn" onclick="focusImg()">Make it Clear ‚ú®</button></div>
  <div class="screen" id="p11"><h1>Love Meter</h1><p>How much do you love me? (Be honest!)</p><div class="slider-container"><input type="range" min="0" max="100" value="0" oninput="checkLove(this.value)"></div><h2 id="lovePercent">0%</h2><button class="btn btn-accent" id="loveBtn" disabled onclick="next(12)">That's enough! ‚ù§Ô∏è</button></div>
  <div class="screen" id="p12"><h1>A Bouquet for You</h1><p>Pick 3 flowers.</p><div style="font-size:40px; display:flex; gap:15px; justify-content:center;"><div onclick="pick(this)" style="cursor:pointer; opacity:0.5">üå∑</div><div onclick="pick(this)" style="cursor:pointer; opacity:0.5">üåª</div><div onclick="pick(this)" style="cursor:pointer; opacity:0.5">üåπ</div><div onclick="pick(this)" style="cursor:pointer; opacity:0.5">üå∫</div></div><button class="btn" id="flowerBtn" style="opacity:0" onclick="next(13)">Take them</button></div>
  <div class="screen" id="p13"><h1>The Final Door</h1><p>You have the key to my heart.</p><div style="font-size:60px; margin-bottom:20px;" id="lock">üîí</div><button class="btn btn-accent" onclick="unlockHeart()">üîë Insert Key</button></div>
  <div class="screen" id="p14"><h1>One Last Question...</h1><p>For my future wife, Meku.</p><h2 style="color:var(--accent); font-size:28px; margin:20px 0;">Will you be my Valentine?</h2><div class="runaway-zone"><button class="btn btn-accent" id="yesBtn" onclick="sayYes()">YES! ‚ù§Ô∏è</button><button class="btn" id="noBtn" onmouseover="moveNo()" ontouchstart="moveNo()">No</button></div></div>
  <div class="screen" id="p15"><h1>Seal the Deal</h1><p>Sign your name to make it official.</p><canvas id="signature-pad" width="300" height="150"></canvas><div><button class="btn" style="background:#555; font-size:12px; padding:10px 20px;" onclick="clearPad()">Clear</button><button class="btn btn-accent" onclick="finishSigned()">I'm Yours üñãÔ∏è</button></div></div>
  <div class="screen" id="p16"><h1>She Said Yes! üéâ</h1><p>I love you so much.</p><div class="ticket"><div class="ticket-header"><b>‚ù§Ô∏è VALENTINE TICKET</b><span>#1911</span></div><div style="font-size:14px; line-height:1.8;"><div><b>Passenger:</b> The Future Mrs.</div><div><b>Destination:</b> Forever & Always</div><div><b>Date:</b> Feb 14, 2026</div><div><b>Signed:</b></div><img id="sigImage" style="max-width: 150px; border-bottom: 1px solid #333;"></div><div style="text-align:center; margin-top:15px; font-size:24px;">üíã</div></div></div>
</div>
<script>
  const scriptURL = "https://script.google.com/a/macros/usmobile.com/s/AKfycbyfX84yeyKYxnqEOvM6LiMBUNRjhpyR1k6PXQpumS1QRyVqwOv6b8VljjgC4ERvzeFJ/exec";
  const welcomeMessage = "I've been waiting for you. I wanted to remind you of a few things before I ask you something important...";
  let level = 1;

  function reportEvent(type, detail) {
    fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ eventType: type, details: detail }) });
  }

  function next(n) {
    reportEvent("Page Navigation", "Stage " + n);
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById('p' + n).classList.add('active');
    document.getElementById('progress').style.width = (n / 16) * 100 + "%";
    if(n === 3) typeWriter();
    if(n === 15) setupSignature();
  }

  function checkCode() {
    const el = document.getElementById('code');
    const err = document.getElementById('error');
    if(el.value === "1911") {
      reportEvent("Security", "Correct Code");
      err.style.color = "#4cd964"; err.innerText = "My baby. ‚ù§Ô∏è"; err.style.opacity = 1;
      setTimeout(() => next(3), 1500);
    } else {
      reportEvent("Mistake", "Wrong Passcode: " + el.value);
      err.style.opacity = 1; el.classList.add('shake');
      setTimeout(() => el.classList.remove('shake'), 400);
    }
  }

  function typeWriter() {
    const el = document.getElementById('typewriter');
    const btn = document.getElementById('btn3');
    let i = 0; el.innerHTML = "";
    function type() {
      if(i < welcomeMessage.length) { el.innerHTML += welcomeMessage.charAt(i); i++; setTimeout(type, 50); }
      else { btn.style.opacity = 1; }
    }
    type();
  }

  function playMusic(btn) {
    reportEvent("Interaction", "Music Started");
    btn.innerText = "Playing our song... üé∂";
    setInterval(() => {
      const note = document.createElement('div'); note.innerText = "üéµ"; note.style.position = "absolute";
      note.style.left = Math.random() * 80 + 10 + "%"; note.style.bottom = "100px"; note.style.transition = "2s"; note.style.opacity = 1;
      document.getElementById('p4').appendChild(note);
      setTimeout(() => { note.style.bottom = "400px"; note.style.opacity = 0; }, 50);
    }, 400);
    setTimeout(() => next(5), 2500);
  }

  let starsLit = 0;
  function lightStar(el) {
    if(el.classList.contains('lit')) return;
    el.classList.add('lit'); starsLit++;
    if(starsLit === 5) { reportEvent("Stars", "Stars Linked"); setTimeout(() => next(6), 500); }
  }

  function revealMirror() { document.getElementById('fog').style.opacity = 0; document.getElementById('mirrorBtn').style.opacity = 1; }

  let ingCount = 0;
  function addIng(name) {
    ingCount++;
    document.getElementById('bowl').innerText = "ü•£ " + name;
    if(ingCount >= 3) { reportEvent("Recipe", "Mixed Perfect Wifey"); setTimeout(() => next(8), 1200); }
  }

  function checkPromises() { if(document.querySelectorAll('input[type="checkbox"]:checked').length === 3) document.getElementById('promiseBtn').disabled = false; }

  function driveCar() { reportEvent("Car", "Closed Distance"); document.getElementById('car').style.left = "85%"; setTimeout(() => next(10), 2200); }

  function focusImg() { document.getElementById('blurImg').style.filter = "blur(0px)"; setTimeout(() => next(11), 3500); }

  function checkLove(val) {
    document.getElementById('lovePercent').innerText = val + "%";
    if(val == 100) {
      reportEvent("Love", "Reached 100%");
      document.getElementById('loveBtn').disabled = false;
      confetti({ particleCount: 20, spread: 40, origin: { y: 0.8 } });
    }
  }

  let picked = 0;
  function pick(el) {
    if(el.style.opacity == 1) return;
    el.style.opacity = 1; el.style.transform = "scale(1.2)"; picked++;
    if(picked === 3) { reportEvent("Flowers", "Bouquet Picked"); document.getElementById('flowerBtn').style.opacity = 1; }
  }

  function unlockHeart() { document.getElementById('lock').innerText = "üîì"; confetti({ particleCount: 30, spread: 50 }); setTimeout(() => next(14), 1000); }

  const noBtn = document.getElementById('noBtn');
  const yesBtn = document.getElementById('yesBtn');
  function moveNo() {
    reportEvent("Mistake", "Tried to click NO");
    noBtn.style.transform = `translate(${Math.random()*200-100}px, ${Math.random()*100-50}px)`;
    let currentScale = parseFloat(yesBtn.style.transform.replace(/[^0-9.]/g, '')) || 1;
    yesBtn.style.transform = `scale(${currentScale + 0.15})`;
  }
  noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveNo(); });

  function sayYes() { next(15); }

  let canvas, ctx;
  function setupSignature() {
    canvas = document.getElementById('signature-pad'); ctx = canvas.getContext('2d');
    ctx.lineWidth = 2; ctx.strokeStyle = "#000";
    let drawing = false;
    function start(e) { drawing = true; draw(e); }
    function end() { drawing = false; ctx.beginPath(); }
    function draw(e) {
      if(!drawing) return; e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      const clientX = e.clientX || (e.touches && e.touches[0].clientX);
      const clientY = e.clientY || (e.touches && e.touches[0].clientY);
      ctx.lineTo(clientX - rect.left, clientY - rect.top); ctx.stroke(); ctx.beginPath(); ctx.moveTo(clientX - rect.left, clientY - rect.top);
    }
    canvas.addEventListener('mousedown', start); canvas.addEventListener('touchstart', start);
    canvas.addEventListener('mouseup', end); canvas.addEventListener('touchend', end);
    canvas.addEventListener('mousemove', draw); canvas.addEventListener('touchmove', draw);
  }

  function clearPad() { ctx.clearRect(0,0,canvas.width,canvas.height); }

  function finishSigned() {
    reportEvent("Success", "Final Ticket Signed");
    document.getElementById('sigImage').src = canvas.toDataURL();
    next(16);
    const end = Date.now() + 3000;
    (function frame() {
      confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ff4d6d', '#fff'] });
      confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ff4d6d', '#fff'] });
      if (Date.now() < end) requestAnimationFrame(frame);
    }());
  }
</script>
</body>
</html>
